language: node_js

env:
  - GH_TOKEN=MyvN+KmNpkhEypwk0QnWCfKQ15iOXdgTYNpjY3IUfVLBNtmsVYajG5Qm6O4N+Myk8xJ8ujpsHAwI+FaiU5ZK8pFSmAhwavDjrjHY8L9LqZiJT2yA1LmPnI9nvJ64+Tm6IQ2wSwII8xaBI8dbcl7JWRPcJGmY8fwuVbEnL2JuAs5uriwE9O1SMZOgdgIKlOVxXVNZZEtFS4bRsJcpMotBiWPrkf3lJ6YkfFiiSsd4MPhXPZE6xg6yc+twY3PkeMIiLGVwCKptzQ74xYcer1J1ha1W/jnTvIkSENyVYQNIqKy+BF08NggoNP1/zzJnSkGRj3dtRfJv/+9LuynWyNCJtQY6O8syrx6/uLfqyHijUC2MdUg9z4iKnAHxsiFtXYt2aXb19UgvzgOfdLoCjUZdKMNKUy5bdyId7Io3objY6obR20tIOuNws79G/0vJI1S4ynDHpMu8A6Ojs7ej09OQYCw85PTyIy9mLP1T92Y7Wnt9nASny/c64rmIcs+FyavslNfOnTf8XnoV+F995iqchjeFItkFYYxAl64tgriYGdnvhKpooZHg37NmRU3fu3NSor3M9yI4yyHsWUXr3f40bjNivAiWqWSqUWlOsoUao+uh+sPPl5IoU8Io5ZviD52R8Lm2tF/j+MBZtrbSeLZqPTRzyBfQPZE+Yaveb6Cjm/s=

node_js:
  - '8.12'
script:
  - npm ci

branches:
  except:
    - /build-.*-.*/ # build-develop-23
    - /v\d\.\d\.\d/ # v1.2.3

after_success:
  - npm run coveralls
  - git config --global user.email "builds@travis-ci.com"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=build-$TRAVIS_BRANCH-$TRAVIS_BUILD_NUMBER
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER"
  - git push origin $GIT_TAG



# before_deploy:
#   - git config --global user.email "builds@travis-ci.com"
#   - git config --global user.name "Travis CI"
#   - export GIT_TAG=v$TRAVIS_BRANCH-$TRAVIS_BUILD_NUMBER
#   - git tag $GIT_TAG -a -m "Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER"
#   - git push origin $GIT_TAG



deploy:
  - provider: releases
    api_key:
      secure: MyvN+KmNpkhEypwk0QnWCfKQ15iOXdgTYNpjY3IUfVLBNtmsVYajG5Qm6O4N+Myk8xJ8ujpsHAwI+FaiU5ZK8pFSmAhwavDjrjHY8L9LqZiJT2yA1LmPnI9nvJ64+Tm6IQ2wSwII8xaBI8dbcl7JWRPcJGmY8fwuVbEnL2JuAs5uriwE9O1SMZOgdgIKlOVxXVNZZEtFS4bRsJcpMotBiWPrkf3lJ6YkfFiiSsd4MPhXPZE6xg6yc+twY3PkeMIiLGVwCKptzQ74xYcer1J1ha1W/jnTvIkSENyVYQNIqKy+BF08NggoNP1/zzJnSkGRj3dtRfJv/+9LuynWyNCJtQY6O8syrx6/uLfqyHijUC2MdUg9z4iKnAHxsiFtXYt2aXb19UgvzgOfdLoCjUZdKMNKUy5bdyId7Io3objY6obR20tIOuNws79G/0vJI1S4ynDHpMu8A6Ojs7ej09OQYCw85PTyIy9mLP1T92Y7Wnt9nASny/c64rmIcs+FyavslNfOnTf8XnoV+F995iqchjeFItkFYYxAl64tgriYGdnvhKpooZHg37NmRU3fu3NSor3M9yI4yyHsWUXr3f40bjNivAiWqWSqUWlOsoUao+uh+sPPl5IoU8Io5ZviD52R8Lm2tF/j+MBZtrbSeLZqPTRzyBfQPZE+Yaveb6Cjm/s=
    file: "yachr-*.*.*.tgz"
    on:
      repo: yachr/yachr
      branch: master

  - provider: npm
    email: tylerhaigh1994@me.com
    api_key:
      secure: bo4wKieaNfXuxukGmlAl18EoPtjzNfbja5NqqK7jcy8B0u/51TamyeumLB6e7W64LCgnOjeJTds1PrFFSJIN/LQpmOeGfM7BwiJtpT0uPC2wShLUB8imJ5xCgFsz5AMuLpkv0DoSBZtDILfEpDyu58Th+9caLEr3B7/6nk/wis2nuI7M6XMKQk6uQbCYo4/7MopGahwOaZn1P/+UVaoO7pw+VWkef7YWC91CfiwVPGnhwjC6SVem6Xx0EAkn8j0ANqAm0g4X8+14vKH/+V5nhMIKYL/4WBvvmV3ccf8FoDMfo+OWITY331+qpleSHsXMuISlnzflAQK6rQ1H+h75AaR9EFEh65X/Rc+9utRd7+JsYF6ehNAtzIzulCB0S6S5M9+ko52/+jxhMxB0qUi7wFBJxLbOXbFvNdchGHYhsVysj+cj3wuYI0xAKw1WxBbjkRBa77EAKH8aCIlJsM21n+anAW8xxraQA7LokFqQYT1eMsB4bXStU3X6dKmo7FtZJv21eC8rzqfwoQ7SCsEmj3FMxii1T+/etm0L3rzJStQ1h+vEiPfZx3cGWaSY0WTLOqZPzMzpDnLlQMjh8+43374udqpngu++7AxXuYX4UL+SuOh5K20qnctKKF5kGDUUq/v8yNC5JfT3Yy/xZ7hbG9lhUtQCulLHLhHURqBHUSA=
    on:
      repo: yachr/yachr
      branch: master
